(self.webpackChunkapp_app=self.webpackChunkapp_app||[]).push([[902],{18254:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(65043),n=a(92314),o=a(96446),r=a(55263),i=a(68903),c=a(85865),l=a(11906),d=a(67784),u=a(12110),h=a(36591),p=a(83462),g=a(29347),x=a(35316),m=a(26600),y=a(17392),j=a(12500),f=a(67201),w=(a(40302),a(63471)),A=a(87539),C=a(70579);const v=()=>{const[e,t]=s.useState(!1),[a,v]=(0,s.useState)([]),[S,b]=(0,s.useState)([]),[_,k]=(0,s.useState)([]),[E,I]=(0,s.useState)([]),[T,U]=(0,s.useState)(""),[L,P]=(0,s.useState)([]),[F,N]=(0,s.useState)(""),[O,D]=(0,s.useState)(""),[R,q]=(0,s.useState)(!1),[z,G]=(0,s.useState)(""),W=(0,s.useRef)(null);(0,s.useEffect)((()=>{H()}),[]);const H=()=>{try{fetch("/api/categorylist",{method:"GET",redirect:"follow"}).then((async e=>200===e.status||400===e.status?{status_code:e.status,data:await e.json()}:{status_code:e.status,data:{msg:"Unexpected Error"}})).then((e=>{P(e.data.data),console.log(e.data.data,"category data")})).catch((e=>console.log("error",e)))}catch(e){console.error(e)}},J=e=>{(e=>{try{const t={method:"DELETE",redirect:"follow"};fetch("/api/category_delete?id=".concat(e),t).then((async e=>200===e.status||400===e.status?{status_code:e.status,data:await e.json()}:{status_code:e.status,data:{msg:"Unexpected Error"}})).then((e=>{I(e),window.location.reload(),console.log(e,"Delete data")})).catch((e=>console.log("error",e)))}catch(t){console.error(t)}})(e),console.log(e,"grow up")},B=()=>{t(!1)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.A,{sx:{flexGrow:1},children:(0,C.jsx)(n.A,{position:"static",children:(0,C.jsxs)(r.A,{variant:"dense",children:[(0,C.jsxs)(i.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,C.jsxs)(i.Ay,{item:!0,xs:6,container:!0,direction:"row",alignItems:"center",children:[(0,C.jsx)(y.A,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:.5},children:(0,C.jsx)(j.A,{})}),(0,C.jsx)(c.A,{variant:"h6",color:"inherit",component:"div",children:"Category List"})]}),(0,C.jsx)(i.Ay,{item:!0,xs:6,container:!0,direction:"row",justifyContent:"flex-end",alignItems:"center",children:(0,C.jsxs)(l.A,{onClick:()=>{t(!0)},color:"inherit",children:[" ",(0,C.jsx)(f.A,{sx:{mr:.5}})," Add Category"]})})]}),(0,C.jsxs)(p.A,{open:e,onClose:B,"aria-labelledby":"responsive-dialog-title",children:[(0,C.jsx)(m.A,{id:"responsive-dialog-title",children:"Create New Category"}),(0,C.jsx)(x.A,{sx:{width:"600px"},children:(0,C.jsxs)(i.Ay,{container:!0,direction:"column",justifyContent:"space-evenly",alignItems:"center",spacing:2,children:[(0,C.jsx)(i.Ay,{mt:2,item:!0,xs:12,sm:6,container:!0,direction:"column",justifyContent:"space-evenly",alignItems:"center",children:(0,C.jsx)(d.A,{label:"Category Name",variant:"outlined",fullWidth:!0,onChange:e=>{D(e.target.value)}})}),(0,C.jsxs)(i.Ay,{item:!0,xs:12,sm:6,container:!0,direction:"column",justifyContent:"space-between",alignItems:"flex-start",children:[(0,C.jsx)("input",{type:"file",ref:W,onChange:e=>((e,t)=>{const s=t.target.files[0];if(s)if(s.type.startsWith("image/")){const t=[...a];t[e]=URL.createObjectURL(s),v(t);const n=[...S];n[e]=s,b(n)}else alert("Please select a valid image file.")})(0,e),accept:"image/*",style:{display:"none"}}),(0,C.jsxs)(l.A,{variant:"contained",sx:{backgroundColor:"#1c305c"},onClick:()=>{W.current.click()},children:[(0,C.jsx)(A.A,{}),"Upload"]}),R&&(0,C.jsx)("div",{style:{color:"error"===z?"red":"green",marginTop:"10px"},children:F}),a[0]&&(0,C.jsx)("img",{src:a[0],alt:"Preview",style:{width:"200px",height:"200px",marginTop:"10px"}})]})]})}),(0,C.jsx)(g.A,{children:(0,C.jsxs)(i.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,C.jsx)(l.A,{onClick:B,children:"Close"}),(0,C.jsx)(l.A,{onClick:async()=>{try{const e=new Headers;e.append("Content-Type","application/json");const t=await(async()=>{try{const e=await Promise.all(S.map((async e=>{const t=new FormData;t.append("file",e),t.append("upload_preset","ae1kvvqp");const a=await fetch("https://api.cloudinary.com/v1_1/qikcall/image/upload",{method:"POST",body:t}),s=await a.json();if(s.secure_url)return console.log(s.secure_url,"Image uploaded successfully"),s.secure_url;throw q(!0),G("error"),N("Failed to upload image"),new Error("Failed to upload image.")})));return q(!0),G("success"),N("Images uploaded successfully"),e}catch(e){throw q(!0),G("error"),N("Error uploading images"),e}})(),a=JSON.stringify({categoryname:O,addimages:t});fetch("/api/category",{method:"POST",headers:e,body:a,redirect:"follow"}).then((async e=>200===e.status||400===e.status?{status_code:e.status,data:await e.json()}:{status_code:e.status,data:{msg:"Unexpected Error"}})).then((e=>{k(e),window.location.reload(),console.log(e,"category")})).catch((e=>console.log("error",e)))}catch(e){console.error(e)}},children:"Save"})]})})]})]})})}),(0,C.jsx)(i.Ay,{mt:5,mb:5,container:!0,spacing:2,children:Array.isArray(L)&&L.length>0?L.map(((e,t)=>(0,C.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:[" ",(0,C.jsxs)(u.A,{sx:{display:"flex",padding:1},children:[(0,C.jsx)(h.A,{component:"img",sx:{width:50,height:50},image:e.addimages,alt:e.categoryname}),(0,C.jsxs)(i.Ay,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[(0,C.jsx)(c.A,{sx:{marginLeft:"10px",fontSize:"15px"},children:e.categoryname}),(0,C.jsx)(y.A,{onClick:()=>{J(e._id)},children:(0,C.jsx)(w.A,{sx:{fontSize:"15px"},color:"error"})})]})]})]},t))):(0,C.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"No categories available"})})]})}},49746:()=>{},19977:()=>{},197:()=>{},21866:()=>{},52739:()=>{}}]);
//# sourceMappingURL=902.d8dfe497.chunk.js.map